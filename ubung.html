<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body onload="getPokemonData()">

    <div id="pokedex">

    </div>
    
</body>
<script>
    async function getPokemonData(limit = 20, offset = 0) {
    const BASE_URL = `https://pokeapi.co/api/v2/pokemon?limit=${limit}&offset=${offset}`;
    try {
        const response = await fetch(BASE_URL);
        if (!response.ok) {
            throw new Error("Fehler beim Abrufen der Daten");
        }

        const data = await response.json();
        const basicResults = data.results;

        // Jetzt holen wir Detaildaten wie Gewicht:
        results = await Promise.all(basicResults.map(async (pokemon) => {
            const res = await fetch(pokemon.url);
            const details = await res.json();
            return {
                name: pokemon.name,
                url: pokemon.url,
                weight: details.weight,
                height: details.height,
                types: details.types.map(t => t.type.name)
            };
        }));

        getPokemonInHtml(results);
    } catch (error) {
        console.error('Fehler:', error);
    }
}

function getPokemonInHtml(results) {
    let pokedexDiv = document.getElementById("pokedex");
    pokedexDiv.innerHTML = "";

    for(let i = 0; i < results.length; i++) {
        results[i];
        pokedexDiv.innerHTML += getElementByIdPokedex(i, results);
    }
}


function getElementByIdPokedex(i, results) {
    const typesString = results[i].types.join(", ");
    return `
        <div class="pokedex_div">    
            <div class="pokedex_div_header">
                <h2>${results[i].name}</h2>
            </div>
            <div class="pokedex_div_item">
                <div class="pokedex_div_item_img">
                    <a href="${results[i].url}" target="_blank">Zur Detailseite</a>
                </div>
                <div class="pokedex_div_item_info">
                    <h3>${results[i].name}</h3>
                    <p>Type: ${typesString}</p>
                    <p>Height: ${results[i].height / 10} m</p>
                    <p>Weight: ${results[i].weight / 10} kg</p>
                </div>
            </div>
        </div>
    `;
}
</script>
</html>